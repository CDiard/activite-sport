{% extends 'base.html.twig' %}

{% block title %}SUAPS - Gestion équipes{% endblock %}

{% block body %}
    <section>
        <h1>Les équipes</h1>
    </section>
    <section>
    {{ form_start(form) }}
        <ul class="name"
        id="teeet"
            data-index="{{ form.teams|length }}"
            data-prototype="{{ form_widget(form.teams.vars.prototype)|e('html_attr') }}"
        >
        {{dump(form.teams)}}
        {% for children in form.teams %}
            {{form_row(children.name)}}
        {% endfor %}
        </ul>
        <button onclick="addFormToCollection(collection)" type="button" class="add_item_link" data-collection-holder-class="tags">Add a tag</button>
    {{ form_end(form) }}
    </section>
    <section>
        <a href="">Tout réinitialiser</a>
    </section>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        collection = document.getElementById("teeet");
    });
    const addFormToCollection = (e) => {
        console.log(e.dataset.prototype)

  const item = document.createElement('li');

  item.innerHTML = e
    .dataset
    .prototype
    .replace(
      /__name__/g,
      e.dataset.index
    );

  e.appendChild(item);

  e.dataset.index++;
};
    </script>
{% endblock %}
